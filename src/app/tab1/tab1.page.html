<ion-app>
  <!-- Menu latéral -->
  <ion-menu contentId="main-content">
    <ion-header>
      <ion-toolbar color="tertiary">
        <ion-title>Menu</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content color="light">
      <ion-list lines="none" class="menu-button-list">
        <ion-item button routerLink="/fitness-journey" detail="false" class="menu-button-item">
          <ion-icon name="barbell" slot="start"></ion-icon>
          <ion-label>Activité</ion-label>
        </ion-item>
        <ion-item button detail="false" class="menu-button-item">
          <ion-icon name="medkit" slot="start"></ion-icon>
          <ion-label>Santé</ion-label>
        </ion-item>
        <ion-item button routerLink="/challenges" detail="false" class="menu-button-item">
          <ion-icon name="trophy" slot="start"></ion-icon>
          <ion-label>Défis</ion-label>
        </ion-item>
        <ion-item button routerLink="/recipes" detail="false" class="menu-button-item">
          <ion-icon name="restaurant" slot="start"></ion-icon>
          <ion-label>Recettes</ion-label>
        </ion-item>
      </ion-list>
    </ion-content>

    <ion-footer>
      <ion-toolbar>
        <ion-buttons slot="end">
          <ion-button routerLink="/login" class="logout-btn">
            <i class="fa-solid fa-right-from-bracket logout-icon"></i>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-footer>
  </ion-menu>

  <!-- Contenu principal -->
  <div class="ion-page" id="main-content">
    <ion-header [translucent]="true">
      <ion-toolbar class="custom-toolbar responsive-toolbar">
        <ion-buttons slot="start">
          <ion-menu-button>
            <i class="fa-solid fa-bars"></i>
          </ion-menu-button>
        </ion-buttons>
        <ion-buttons slot="end" class="header-buttons">
          <ion-button class="user-btn" routerLink="/profile">
            <i class="fa-solid fa-circle-user user-icon"></i>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>

    <ion-content class="ion-padding">
      <!-- Graphique calories personnalisé -->
      <app-calories-chart
      [consumed]="dailyStats.consumed"
      [target]="dailyStats.target"
      [userId]="currentUserId" 
      [date]="selectedDate">   
    </app-calories-chart>

      <!-- Statistiques rapides (Poids / Pas) -->
      <ion-grid>
        <ion-row>
          <!-- Carte 1 : Poids actuel -->
          <ion-col size="12" size-md="6">
            <ion-card class="stat-card">
              <ion-card-content class="ion-padding">
                <div class="stat-header">
                  <div class="info">
                    <p class="title text-muted">Poids actuel</p>
                    <div class="value-row">
                      <span class="value">{{ dailyStats.weight }}</span>
                      <span class="unit">kg</span>
                    </div>
                    <div class="trend">
                      <span class="trend-value" [class.success]="dailyStats.weightTrend < 0"
                            [class.danger]="dailyStats.weightTrend > 0">
                        {{ dailyStats.weightTrend }}%
                      </span>
                      <span class="trend-text">vs hier</span>
                    </div>
                  </div>
                  <div class="icon-wrapper bg-primary-light">
                    <ion-img src="../../assets/icon/target.png" class="iicon"></ion-img>
                  </div>
                </div>
              </ion-card-content>
            </ion-card>
          </ion-col>

          <!-- Carte 2 : Pas aujourd'hui -->
          <ion-col size="12" size-md="6">
            <ion-card class="stat-card">
              <ion-card-content class="ion-padding">
                <div class="stat-header">
                  <div class="info">
                    <p class="title text-muted">Pas aujourd'hui</p>
                    <div class="value-row">
                      <span class="value">{{ dailyStats.steps | number }}</span>
                    </div>
                    <div class="trend">
                      <span class="trend-value success">+{{ dailyStats.stepsTrend }}%</span>
                      <span class="trend-text">vs hier</span>
                    </div>
                  </div>
                  <div class="icon-wrapper bg-primary-light">
                    <ion-img src="../../assets/icon/trending-up.png" class="iicon"></ion-img>
                  </div>
                </div>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>

      <!-- Actions rapides -->
      <ion-grid>
        <ion-row>
          <ion-col size="6">
            <ion-button expand="block" color="secondary" (click)="navigateTo('recipes')">
              <ion-icon name="restaurant" slot="start"></ion-icon>
              Ajouter repas
            </ion-button>
          </ion-col>
          <ion-col size="6">
            <ion-button expand="block" fill="outline" (click)="navigateTo('activities')">
              <ion-icon name="flame" slot="start"></ion-icon>
              Activité
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>

      <!-- Repas récents -->
     <app-repas-recent></app-repas-recent>
    </ion-content>
  </div>
</ion-app>
